{% extends 'base.html' %}
{% load  static %}

{% block content %}

    <div class="wrapper">
    {% include 'navbar.html' %}
<main role="main" class="main-content">
        <div class="container-fluid">
          <div class="row justify-content-center">
            <div class="col-12">
              <h2 class="h3 mb-4 page-title">Beneficiary Profile</h2>
            <div style="padding-left: 75%;">
           <a style="padding-right: 20px"><button class="btn btn-primary" data-bs-toggle="modal" data-toggle="modal" data-target="#verticalModal1">Donate Now</button></a>
            <a><button class="btn btn-success" data-bs-toggle="modal" data-toggle="modal" data-target="#anonymous1">Anonymous Donation</button></a>
            </div>

            <div class="modal fade" id="verticalModal1" tabindex="-1" role="dialog" aria-labelledby="verticalModalTitle" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title" id="verticalModalTitle">Make a Donation</h5>
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                              </button>
                            </div>
                              <form method="post" action="{% url 'profile' beneficiary.id %}">
                                  {% csrf_token %}
                        <div class="modal-body">

                                 <div class="form-group">
                                  <label for="hj-name" class="col-form-label">Name:</label>
                                  {{ form.donor_name }}
                                </div>
                            <div class="form-group">
                                  <label for="jh-name" class="col-form-label">Email:</label>
                                  {{ form.donor_email }}
                                </div>
                            <div class="form-group">
                                  <label for="mlkk-name" class="col-form-label">Cell:</label>
                                  {{ form.donor_cell }}
                                </div>
                            <div class="form-group">
                                  <label for="recipient-name" class="col-form-label">Currency:</label>
                                  {{ form.currency }}
                                </div>
                            <div class="form-group">
                                  <label for="recipient-name" class="col-form-label">Amount:</label>
                                  {{ form.amount }}
                                </div>
                            <div class="form-group">
                                  <label for="recipient-name" class="col-form-label">Payment Method:</label>
                                  {{ form.payment_method }}
                                </div>

                        </div>
                            <div class="modal-footer">
                              <button type="button" class="btn mb-2 btn-secondary" data-dismiss="modal">Close</button>
                              <button  type="submit" class="btn mb-2 btn-primary">Submit</button>
                            </div>
                              </form>
                          </div>
                        </div>
                      </div>


                        <div class="modal fade" id="anonymous1" tabindex="-1" role="dialog" aria-labelledby="verticalModalTitle" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title" id="verticalModalTitle">Anonymous Donation</h5>
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                              </button>
                            </div>
                              <form method="post" action="{% url 'profile' beneficiary.id %}">
                                  {% csrf_token %}
                        <div class="modal-body">

                            <div class="form-group">
                                  <label for="recipient-name" class="col-form-label">Currency:</label>
                                  {{ form.currency }}
                                </div>
                            <div class="form-group">
                                  <label for="recipient-name" class="col-form-label">Amount:</label>
                                  {{ form.amount }}
                                </div>
                            <div class="form-group">
                                  <label for="recipient-name" class="col-form-label">Payment Method:</label>
                                  {{ form.payment_method }}
                                </div>

                        </div>
                            <div class="modal-footer">
                              <button type="button" class="btn mb-2 btn-secondary" data-dismiss="modal">Close</button>
                              <button  type="submit" class="btn mb-2 btn-primary">Submit</button>
                            </div>
                              </form>
                          </div>
                        </div>
                      </div>


              <div class="row mt-5 align-items-center">
                <div class="col-md-3 text-center mb-5">
                  <div class="avatar avatar-xl">
                    <img src="{% static 'assets/avatars/face-1.jpg' %}" alt="..." class="avatar-img rounded-circle">
                  </div>
                </div>
                <div class="col">
                  <div class="row align-items-center">
                    <div class="col-md-7">
                      <h4 class="mb-1">{{ beneficiary.name }}, {{ beneficiary.category }}</h4>
                    </div>
                  </div>
                  <div class="row mb-4">
                    <div class="col-md-12">
                      <p class="text">{{ beneficiary.about }}</p>
                    </div>

                  </div>
                </div>
              </div>
              <div class="row my-4">
                <div class="col-md-4">
                  <div class="card mb-4 shadow">
                    <div class="card-body my-n3">
                      <div class="row align-items-center">
                        <div class="col-3 text-center">
                          <span class="circle circle-lg bg-light">
                            <i class="fe fe-map-pin fe-24 text-primary"></i>
                          </span>
                        </div> <!-- .col -->
                        <div class="col mb-5">
                            <h3 class="h5 mt-4 mb-1">Address</h3>
                           <p class="small mb-0 text">{{ beneficiary.address }}</p>
                             <p class="small mb-0 text">{{ beneficiary.city }}</p>
                            <p class="small mb-0 text">Zimbabwe</p>
                        </div> <!-- .col -->
                      </div> <!-- .row -->
                    </div> <!-- .card-body -->
                  </div> <!-- .card -->
                </div> <!-- .col-md-->
                <div class="col-md-4">
                  <div class="card mb-4 shadow">
                    <div class="card-body my-n3">
                      <div class="row align-items-center">
                        <div class="col-3 text-center">
                          <span class="circle circle-lg bg-light">
                            <i class="fe fe-phone fe-24 text-primary"></i>
                          </span>
                        </div> <!-- .col -->
                        <div class="col mb-5">
                            <h3 class="h5 mt-4 mb-1">Contact</h3>
                            <p class="small mb-0 text">{{ beneficiary.cell }}</p>
                             <p class="small mb-0 text">{{ beneficiary.email }}</p>
                            <p class="small mb-0 text">{{ beneficiary.manager.email }}</p>
                        </div> <!-- .col -->
                      </div> <!-- .row -->
                    </div> <!-- .card-body -->
                  </div> <!-- .card -->
                </div> <!-- .col-md-->
                <div class="col-md-4">
                  <div class="card mb-4 shadow">
                    <div class="card-body my-n3">
                      <div class="row align-items-center">
                        <div class="col-3 text-center">
                          <span class="circle circle-lg bg-light">
                            <i class="fe fe-map fe-24 text-primary"></i>
                          </span>
                        </div> <!-- .col -->
                        <div class="col mb-4">

                            <h3 class="h5 mt-4 mb-1">Geolocation</h3>
                              <p class="small mb-0 text">Latitude : {{ beneficiary.latitude }}</p>
                             <p class="small mb-3 text">Longitude: {{ beneficiary.longitude }}</p>
                            <a href="https://www.google.com/maps/search/?api=1&query={{ beneficiary.latitude }}, {{ beneficiary.longitude }}" target="_blank"><button class="btn-sm btn-primary">View on Google Maps</button></a>


                        </div> <!-- .col -->
                      </div> <!-- .row -->
                    </div> <!-- .card-body -->
                  </div> <!-- .card -->
                </div> <!-- .col-md-->
              </div> <!-- .row-->

              <h6 class="mb-3">Latest Donations</h6>

                 <table class="table table-borderless table-striped">
                        <thead>
                          <tr>
                            <th>#</th>
                            <th><strong>Donor Name</strong></th>
                            <th><strong>Currency</strong></th>
                            <th><strong>Amount</strong></th>
                            <th><strong>Payment Method</strong></th>
                               <th><strong>Date</strong></th>
                          </tr>
                        </thead>
                        <tbody id="tbody">
                        {% for donation in donations %}
                          <tr>
                            <td>{{ donation.id }}</td>
                            <td>{{ donation.donor_name }}</td>
                            <td>{{ donation.currency }}</td>
                            <td>{{ donation.amount }}</td>
                            <td>{{ donation.payment_method }}</td>
                            <td>{{ donation.date }}</td>
                          </tr>
                        {% endfor %}
                        </tbody>
                      </table>
            </div> <!-- /.col-12 -->
          </div> <!-- .row -->
        </div> <!-- .container-fluid -->


      </main> <!-- main -->
    </div>

{% include 'scripts.html' %}

{% endblock content %}